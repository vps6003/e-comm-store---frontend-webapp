"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[249],{7249(O,p,n){n.d(p,{Profile:()=>U});var P=n(467),E=n(7411),w=n(1400),m=n(2200),o=n(2615),i=n(9417),u=n(8834),v=n(1228),c=n(2155),F=n(8132),b=n(4984),f=n(2629),e=n(3664),h=n(4297),_=n(7982);function k(s,d){if(1&s){const r=e.RV6();e.j41(0,"div",3)(1,"h2",4),e.EFF(2,"Profile"),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Username:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Email:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"div",5)(12,"button",6),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return t.editName=!0,o.Njj(t.editPassword=!1)}),e.EFF(13," Edit Name "),e.k0s(),e.j41(14,"button",7),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return t.editPassword=!0,o.Njj(t.editName=!1)}),e.EFF(15," Edit Password "),e.k0s(),e.j41(16,"a",8)(17,"button",9),e.EFF(18,"Homepage"),e.k0s()(),e.j41(19,"a",10)(20,"button",11),e.EFF(21,"My Orders"),e.k0s()()()()}if(2&s){const r=e.XpG();e.R7$(6),e.SpI(" ",r.commonVariablesService.userName$.value||""," "),e.R7$(4),e.SpI(" ",(null==r.commonVariablesService.userDetails$.value?null:r.commonVariablesService.userDetails$.value.email)||"")}}function j(s,d){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Name is required "),e.k0s())}function N(s,d){if(1&s){const r=e.RV6();e.j41(0,"div",12)(1,"h2",4),e.EFF(2,"Edit Name"),e.k0s(),e.j41(3,"form",13),e.bIt("ngSubmit",function(){o.eBV(r);const t=e.XpG();return o.Njj(t.updateName())}),e.j41(4,"mat-form-field",14)(5,"mat-label"),e.EFF(6,"Full Name"),e.k0s(),e.nrm(7,"input",15),e.DNE(8,j,2,0,"mat-error",16),e.k0s(),e.j41(9,"div",17)(10,"button",18),e.EFF(11," Update Name "),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return t.editPassword=!0,o.Njj(t.editName=!1)}),e.EFF(13," Edit Password "),e.k0s(),e.j41(14,"button",19),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return o.Njj(t.editName=!1)}),e.EFF(15," Cancel "),e.k0s()()()()}if(2&s){let r;const a=e.XpG();e.R7$(3),e.Y8G("formGroup",a.userNameUpdateForm),e.R7$(5),e.Y8G("ngIf",null==(r=a.userNameUpdateForm.get("name"))?null:r.hasError("required")),e.R7$(2),e.Y8G("disabled",a.userNameUpdateForm.invalid)}}function g(s,d){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Password must be at least 5 characters. "),e.k0s())}function D(s,d){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Password must be at least 5 characters. "),e.k0s())}function I(s,d){1&s&&(e.j41(0,"mat-error"),e.EFF(1," Passwords do not match. "),e.k0s())}function R(s,d){if(1&s){const r=e.RV6();e.j41(0,"div",12)(1,"h2",4),e.EFF(2,"Edit Password"),e.k0s(),e.j41(3,"form",13),e.bIt("ngSubmit",function(){o.eBV(r);const t=e.XpG();return o.Njj(t.updatePassword())}),e.j41(4,"mat-form-field",14)(5,"mat-label"),e.EFF(6,"Old Password"),e.k0s(),e.nrm(7,"input",20),e.j41(8,"button",21),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return o.Njj(t.hideOldPassword=!t.hideOldPassword)}),e.j41(9,"mat-icon"),e.EFF(10),e.k0s()(),e.DNE(11,g,2,0,"mat-error",16),e.k0s(),e.j41(12,"mat-form-field",14)(13,"mat-label"),e.EFF(14,"New Password"),e.k0s(),e.nrm(15,"input",22),e.j41(16,"button",21),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return o.Njj(t.hideNewPassword=!t.hideNewPassword)}),e.j41(17,"mat-icon"),e.EFF(18),e.k0s()(),e.DNE(19,D,2,0,"mat-error",16),e.k0s(),e.j41(20,"mat-form-field",14)(21,"mat-label"),e.EFF(22,"Confirm New Password"),e.k0s(),e.nrm(23,"input",23),e.j41(24,"button",21),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return o.Njj(t.hideConfirmPassword=!t.hideConfirmPassword)}),e.j41(25,"mat-icon"),e.EFF(26),e.k0s()(),e.DNE(27,I,2,0,"mat-error",16),e.k0s(),e.j41(28,"div",17)(29,"button",18),e.EFF(30," Update Password "),e.k0s(),e.j41(31,"button",7),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return t.editPassword=!1,o.Njj(t.editName=!0)}),e.EFF(32," Edit Name "),e.k0s(),e.j41(33,"button",19),e.bIt("click",function(){o.eBV(r);const t=e.XpG();return o.Njj(t.editPassword=!1)}),e.EFF(34," Cancel "),e.k0s()()()()}if(2&s){let r,a,t;const l=e.XpG();e.R7$(3),e.Y8G("formGroup",l.userPasswordUpdateForm),e.R7$(4),e.Y8G("type",l.hideOldPassword?"password":"text"),e.R7$(3),e.JRh(l.hideOldPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",(null==(r=l.userPasswordUpdateForm.get("oldPassword"))?null:r.touched)&&(null==(r=l.userPasswordUpdateForm.get("oldPassword"))?null:r.invalid)),e.R7$(4),e.Y8G("type",l.hideNewPassword?"password":"text"),e.R7$(3),e.JRh(l.hideNewPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",(null==(a=l.userPasswordUpdateForm.get("newPassword"))?null:a.touched)&&(null==(a=l.userPasswordUpdateForm.get("newPassword"))?null:a.invalid)),e.R7$(4),e.Y8G("type",l.hideConfirmPassword?"password":"text"),e.R7$(3),e.JRh(l.hideConfirmPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",(null==(t=l.userPasswordUpdateForm.get("confirmPassword"))?null:t.touched)&&(null==(t=l.userPasswordUpdateForm.get("confirmPassword"))?null:t.hasError("passwordMismatch"))),e.R7$(2),e.Y8G("disabled",l.userPasswordUpdateForm.invalid)}}let U=(()=>{class s{commonVariablesService=(0,o.WQX)(w.y);commonServices=(0,o.WQX)(E.e);formBuilder=(0,o.WQX)(i.ok);editName=!1;editPassword=!1;userNameUpdateForm;userPasswordUpdateForm;hideOldPassword=!0;hideNewPassword=!0;hideConfirmPassword=!0;ngOnInit(){const r=localStorage.getItem("userData")||"{}",a=JSON.parse(r);this.commonVariablesService.userData=a,this.userNameUpdateForm=this.formBuilder.group({name:[this.commonVariablesService.userData.name||"",[i.k0.required,i.k0.minLength(3)]]}),this.userPasswordUpdateForm=this.formBuilder.group({oldPassword:["",[i.k0.required,i.k0.minLength(5)]],newPassword:["",[i.k0.required,i.k0.minLength(5)]],confirmPassword:["",[i.k0.required,i.k0.minLength(5)]]},{validators:b.R})}updatePassword(){var r=this;return(0,P.A)(function*(){if(r.userPasswordUpdateForm.markAllAsTouched(),r.userPasswordUpdateForm.invalid)return;const a=r.userPasswordUpdateForm.value,t=JSON.parse(yield r.commonServices.getUserDataFromStorage());a.userId=t._id,r.commonServices.changePassword(a)})()}updateName(){if(this.userNameUpdateForm.markAllAsTouched(),this.userNameUpdateForm.invalid)return;const r=this.userNameUpdateForm.value,a=localStorage.getItem("user");this.commonVariablesService.userData=JSON.parse(a||"{}"),this.commonServices.updateUsername(this.commonVariablesService.userData._id,r?.name)}static \u0275fac=function(a){return new(a||s)};static \u0275cmp=e.VBU({type:s,selectors:[["app-profile"]],decls:4,vars:3,consts:[[1,"p-4","max-w-md","mx-auto"],["class","space-y-[1rem]",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"space-y-[1rem]"],[1,"text-xl","font-bold"],[1,"flex","gap-[0.5rem]"],["mat-raised-button","","color","primary",1,"w-auto","!rounded-full",3,"click"],["mat-raised-button","","color","accent",1,"w-auto","!rounded-full",3,"click"],["routerLink","/home"],["mat-raised-button","","color","warn",1,"w-auto","!rounded-full"],["routerLink","/orders"],["mat-raised-button","",1,"w-auto","!rounded-full","!bg-cyan-300"],[1,"space-y-4"],[3,"ngSubmit","formGroup"],[1,"w-full"],["matInput","","formControlName","name","placeholder","Enter Name Here",1,"p-2"],[4,"ngIf"],[1,"flex","gap-2"],["mat-raised-button","","color","primary","type","submit",1,"w-auto","!rounded-full",3,"disabled"],["mat-raised-button","","color","warn",1,"w-auto","!rounded-full",3,"click"],["matInput","","formControlName","oldPassword","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","newPassword","placeholder","Enter your new password",3,"type"],["matInput","","formControlName","confirmPassword","placeholder","Confirm new password",3,"type"]],template:function(a,t){1&a&&(e.j41(0,"div",0),e.DNE(1,k,22,2,"div",1)(2,N,16,3,"div",2)(3,R,35,11,"div",2),e.k0s()),2&a&&(e.R7$(),e.Y8G("ngIf",!t.editName&&!t.editPassword),e.R7$(),e.Y8G("ngIf",t.editName),e.R7$(),e.Y8G("ngIf",t.editPassword))},dependencies:[m.MD,m.bT,i.X1,i.qT,i.me,i.BC,i.cb,i.j4,i.JD,u.Hl,u.$z,h.iY,c.fS,c.fg,_.rl,_.nJ,_.TL,_.yw,f.m_,f.An,i.YN,F.Wk,v.R],encapsulation:2})}return s})()}}]);