"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[249],{7249:(O,_,i)=>{i.r(_),i.d(_,{Profile:()=>R});var P=i(467),u=i(2200),s=i(2615),n=i(9417),c=i(8834),E=i(1228),f=i(2155),v=i(8132),w=i(4984),p=i(2629),e=i(3664),F=i(1400),b=i(7411),h=i(4297),m=i(7982);function j(o,d){if(1&o){const r=e.RV6();e.j41(0,"div",3)(1,"h2",4),e.EFF(2,"Profile"),e.k0s(),e.j41(3,"p")(4,"strong"),e.EFF(5,"Username:"),e.k0s(),e.EFF(6),e.k0s(),e.j41(7,"p")(8,"strong"),e.EFF(9,"Email:"),e.k0s(),e.EFF(10),e.k0s(),e.j41(11,"div",5)(12,"button",6),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return t.editName=!0,s.Njj(t.editPassword=!1)}),e.EFF(13," Edit Name "),e.k0s(),e.j41(14,"button",7),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return t.editPassword=!0,s.Njj(t.editName=!1)}),e.EFF(15," Edit Password "),e.k0s(),e.j41(16,"a",8)(17,"button",9),e.EFF(18,"Homepage"),e.k0s()(),e.j41(19,"a",10)(20,"button",11),e.EFF(21,"My Orders"),e.k0s()()()()}if(2&o){const r=e.XpG();e.R7$(6),e.SpI(" ",r.commonVariablesService.userName$.value||""," "),e.R7$(4),e.SpI(" ",(null==r.commonVariablesService.userDetails$.value?null:r.commonVariablesService.userDetails$.value.email)||"")}}function k(o,d){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Name is required "),e.k0s())}function N(o,d){if(1&o){const r=e.RV6();e.j41(0,"div",12)(1,"h2",4),e.EFF(2,"Edit Name"),e.k0s(),e.j41(3,"form",13),e.bIt("ngSubmit",function(){s.eBV(r);const t=e.XpG();return s.Njj(t.updateName())}),e.j41(4,"mat-form-field",14)(5,"mat-label"),e.EFF(6,"Full Name"),e.k0s(),e.nrm(7,"input",15),e.DNE(8,k,2,0,"mat-error",16),e.k0s(),e.j41(9,"div",17)(10,"button",18),e.EFF(11," Update Name "),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return t.editPassword=!0,s.Njj(t.editName=!1)}),e.EFF(13," Edit Password "),e.k0s(),e.j41(14,"button",19),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return s.Njj(t.editName=!1)}),e.EFF(15," Cancel "),e.k0s()()()()}if(2&o){let r;const a=e.XpG();e.R7$(3),e.Y8G("formGroup",a.userNameUpdateForm),e.R7$(5),e.Y8G("ngIf",null==(r=a.userNameUpdateForm.get("name"))?null:r.hasError("required")),e.R7$(2),e.Y8G("disabled",a.userNameUpdateForm.invalid)}}function g(o,d){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Password must be at least 5 characters. "),e.k0s())}function D(o,d){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Password must be at least 5 characters. "),e.k0s())}function I(o,d){1&o&&(e.j41(0,"mat-error"),e.EFF(1," Passwords do not match. "),e.k0s())}function U(o,d){if(1&o){const r=e.RV6();e.j41(0,"div",12)(1,"h2",4),e.EFF(2,"Edit Password"),e.k0s(),e.j41(3,"form",13),e.bIt("ngSubmit",function(){s.eBV(r);const t=e.XpG();return s.Njj(t.updatePassword())}),e.j41(4,"mat-form-field",14)(5,"mat-label"),e.EFF(6,"Old Password"),e.k0s(),e.nrm(7,"input",20),e.j41(8,"button",21),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return s.Njj(t.hideOldPassword=!t.hideOldPassword)}),e.j41(9,"mat-icon"),e.EFF(10),e.k0s()(),e.DNE(11,g,2,0,"mat-error",16),e.k0s(),e.j41(12,"mat-form-field",14)(13,"mat-label"),e.EFF(14,"New Password"),e.k0s(),e.nrm(15,"input",22),e.j41(16,"button",21),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return s.Njj(t.hideNewPassword=!t.hideNewPassword)}),e.j41(17,"mat-icon"),e.EFF(18),e.k0s()(),e.DNE(19,D,2,0,"mat-error",16),e.k0s(),e.j41(20,"mat-form-field",14)(21,"mat-label"),e.EFF(22,"Confirm New Password"),e.k0s(),e.nrm(23,"input",23),e.j41(24,"button",21),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return s.Njj(t.hideConfirmPassword=!t.hideConfirmPassword)}),e.j41(25,"mat-icon"),e.EFF(26),e.k0s()(),e.DNE(27,I,2,0,"mat-error",16),e.k0s(),e.j41(28,"div",17)(29,"button",18),e.EFF(30," Update Password "),e.k0s(),e.j41(31,"button",7),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return t.editPassword=!1,s.Njj(t.editName=!0)}),e.EFF(32," Edit Name "),e.k0s(),e.j41(33,"button",19),e.bIt("click",function(){s.eBV(r);const t=e.XpG();return s.Njj(t.editPassword=!1)}),e.EFF(34," Cancel "),e.k0s()()()()}if(2&o){let r,a,t;const l=e.XpG();e.R7$(3),e.Y8G("formGroup",l.userPasswordUpdateForm),e.R7$(4),e.Y8G("type",l.hideOldPassword?"password":"text"),e.R7$(3),e.JRh(l.hideOldPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",(null==(r=l.userPasswordUpdateForm.get("oldPassword"))?null:r.touched)&&(null==(r=l.userPasswordUpdateForm.get("oldPassword"))?null:r.invalid)),e.R7$(4),e.Y8G("type",l.hideNewPassword?"password":"text"),e.R7$(3),e.JRh(l.hideNewPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",(null==(a=l.userPasswordUpdateForm.get("newPassword"))?null:a.touched)&&(null==(a=l.userPasswordUpdateForm.get("newPassword"))?null:a.invalid)),e.R7$(4),e.Y8G("type",l.hideConfirmPassword?"password":"text"),e.R7$(3),e.JRh(l.hideConfirmPassword?"visibility_off":"visibility"),e.R7$(),e.Y8G("ngIf",(null==(t=l.userPasswordUpdateForm.get("confirmPassword"))?null:t.touched)&&(null==(t=l.userPasswordUpdateForm.get("confirmPassword"))?null:t.hasError("passwordMismatch"))),e.R7$(2),e.Y8G("disabled",l.userPasswordUpdateForm.invalid)}}let R=(()=>{class o{commonVariablesService;commonServices;formBuilder=(0,s.WQX)(n.ok);editName=!1;editPassword=!1;userNameUpdateForm;userPasswordUpdateForm;hideOldPassword=!0;hideNewPassword=!0;hideConfirmPassword=!0;constructor(r,a){this.commonVariablesService=r,this.commonServices=a}ngOnInit(){const r=localStorage.getItem("userData")||"{}",a=JSON.parse(r);this.commonVariablesService.userData=a,this.userNameUpdateForm=this.formBuilder.group({name:[this.commonVariablesService.userData.name||"",[n.k0.required,n.k0.minLength(3)]]}),this.userPasswordUpdateForm=this.formBuilder.group({oldPassword:["",[n.k0.required,n.k0.minLength(5)]],newPassword:["",[n.k0.required,n.k0.minLength(5)]],confirmPassword:["",[n.k0.required,n.k0.minLength(5)]]},{validators:w.R})}updatePassword(){var r=this;return(0,P.A)(function*(){if(r.userPasswordUpdateForm.markAllAsTouched(),r.userPasswordUpdateForm.invalid)return;const a=r.userPasswordUpdateForm.value,t=JSON.parse(yield r.commonServices.getUserDataFromStorage());a.userId=t._id,r.commonServices.changePassword(a)})()}updateName(){if(this.userNameUpdateForm.markAllAsTouched(),this.userNameUpdateForm.invalid)return;const r=this.userNameUpdateForm.value,a=localStorage.getItem("user");this.commonVariablesService.userData=JSON.parse(a||"{}"),this.commonServices.updateUsername(this.commonVariablesService.userData._id,r?.name)}static \u0275fac=function(a){return new(a||o)(e.rXU(F.y),e.rXU(b.e))};static \u0275cmp=e.VBU({type:o,selectors:[["app-profile"]],decls:4,vars:3,consts:[[1,"p-4","max-w-md","mx-auto"],["class","space-y-[1rem]",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"space-y-[1rem]"],[1,"text-xl","font-bold"],[1,"flex","gap-[0.5rem]"],["mat-raised-button","","color","primary",1,"w-auto","!rounded-full",3,"click"],["mat-raised-button","","color","accent",1,"w-auto","!rounded-full",3,"click"],["routerLink","/home"],["mat-raised-button","","color","warn",1,"w-auto","!rounded-full"],["routerLink","/orders"],["mat-raised-button","",1,"w-auto","!rounded-full","!bg-cyan-300"],[1,"space-y-4"],[3,"ngSubmit","formGroup"],[1,"w-full"],["matInput","","formControlName","name","placeholder","Enter Name Here",1,"p-2"],[4,"ngIf"],[1,"flex","gap-2"],["mat-raised-button","","color","primary","type","submit",1,"w-auto","!rounded-full",3,"disabled"],["mat-raised-button","","color","warn",1,"w-auto","!rounded-full",3,"click"],["matInput","","formControlName","oldPassword","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","newPassword","placeholder","Enter your new password",3,"type"],["matInput","","formControlName","confirmPassword","placeholder","Confirm new password",3,"type"]],template:function(a,t){1&a&&(e.j41(0,"div",0),e.DNE(1,j,22,2,"div",1)(2,N,16,3,"div",2)(3,U,35,11,"div",2),e.k0s()),2&a&&(e.R7$(),e.Y8G("ngIf",!t.editName&&!t.editPassword),e.R7$(),e.Y8G("ngIf",t.editName),e.R7$(),e.Y8G("ngIf",t.editPassword))},dependencies:[u.MD,u.bT,n.X1,n.qT,n.me,n.BC,n.cb,n.j4,n.JD,c.Hl,c.$z,h.iY,f.fS,f.fg,m.rl,m.nJ,m.TL,m.yw,p.m_,p.An,n.YN,v.Wk,E.R],encapsulation:2})}return o})()}}]);