"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[704],{2704:(B,u,n)=>{n.r(u),n.d(u,{Register:()=>N});var h=n(467),l=n(2615),s=n(9417),g=n(8834),v=n(1228),f=n(2155),p=n(2629),b=n(3243),k=n(9350),R=n(7707);function F(i,m){const t="object"==typeof m;return new Promise((o,r)=>{const c=new R.Ms({next:a=>{o(a),c.unsubscribe()},error:r,complete:()=>{t?o(m.defaultValue):r(new k.G)}});i.subscribe(c)})}var w=n(4395),j=n(4984),e=n(3664),x=n(1816),y=n(7411),E=n(8983),d=n(7982),_=n(4297);function C(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Name is required (min 3 characters)."),e.k0s())}function S(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter a valid email."),e.k0s())}function P(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Password must be at least 6 characters."),e.k0s())}function V(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Password must be at least 6 characters."),e.k0s())}function G(i,m){if(1&i){const t=e.RV6();e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Register"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){l.eBV(t);const r=e.XpG();return l.Njj(r.onSubmit())}),e.j41(5,"mat-form-field",4)(6,"mat-label"),e.EFF(7,"Name"),e.k0s(),e.nrm(8,"input",5),e.j41(9,"mat-icon",6),e.EFF(10,"person"),e.k0s(),e.nVh(11,C,2,0,"mat-error"),e.k0s(),e.j41(12,"mat-form-field",4)(13,"mat-label"),e.EFF(14,"Email"),e.k0s(),e.nrm(15,"input",7),e.j41(16,"mat-icon",6),e.EFF(17,"email"),e.k0s(),e.nVh(18,S,2,0,"mat-error"),e.k0s(),e.j41(19,"mat-form-field",4)(20,"mat-label"),e.EFF(21,"Password"),e.k0s(),e.nrm(22,"input",8),e.j41(23,"button",9),e.bIt("click",function(){l.eBV(t);const r=e.XpG();return l.Njj(r.hidePassword=!r.hidePassword)}),e.j41(24,"mat-icon"),e.EFF(25),e.k0s()(),e.nVh(26,P,2,0,"mat-error"),e.k0s(),e.j41(27,"mat-form-field",4)(28,"mat-label"),e.EFF(29,"Confirm Password"),e.k0s(),e.nrm(30,"input",10),e.j41(31,"button",9),e.bIt("click",function(){l.eBV(t);const r=e.XpG();return l.Njj(r.hidePassword=!r.hidePassword)}),e.j41(32,"mat-icon"),e.EFF(33),e.k0s()(),e.nVh(34,V,2,0,"mat-error"),e.k0s(),e.j41(35,"button",11)(36,"mat-icon",12),e.EFF(37,"person_add"),e.k0s(),e.EFF(38," Register "),e.k0s(),e.j41(39,"button",13),e.bIt("click",function(){l.eBV(t);const r=e.XpG();return l.Njj(r.signUp=!1)}),e.j41(40,"mat-icon",12),e.EFF(41,"login"),e.k0s(),e.EFF(42," Login "),e.k0s()()()()}if(2&i){let t,o,r,c;const a=e.XpG();e.R7$(4),e.Y8G("formGroup",a.registerForm),e.R7$(7),e.vxM(null!=(t=a.registerForm.get("name"))&&t.touched&&null!=(t=a.registerForm.get("name"))&&t.invalid?11:-1),e.R7$(7),e.vxM(null!=(o=a.registerForm.get("email"))&&o.touched&&null!=(o=a.registerForm.get("email"))&&o.invalid?18:-1),e.R7$(4),e.Y8G("type",a.hidePassword?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password"),e.R7$(2),e.JRh(a.hidePassword?"visibility_off":"visibility"),e.R7$(),e.vxM(null!=(r=a.registerForm.get("password"))&&r.touched&&null!=(r=a.registerForm.get("password"))&&r.invalid?26:-1),e.R7$(4),e.Y8G("type",a.hidePassword?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password"),e.R7$(2),e.JRh(a.hidePassword?"visibility_off":"visibility"),e.R7$(),e.vxM(null!=(c=a.registerForm.get("confirmPassword"))&&c.touched&&null!=(c=a.registerForm.get("confirmPassword"))&&c.invalid?34:-1),e.R7$(),e.Y8G("disabled",a.registerForm.invalid)}}function T(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter a valid email."),e.k0s())}function $(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Password must be at least 6 characters."),e.k0s())}function I(i,m){if(1&i){const t=e.RV6();e.j41(0,"div",0)(1,"div",14)(2,"div",15),e.nrm(3,"img",16),e.j41(4,"h2",17),e.EFF(5,"Login"),e.k0s()(),e.j41(6,"form",3),e.bIt("ngSubmit",function(){l.eBV(t);const r=e.XpG();return l.Njj(r.onSubmit())}),e.j41(7,"mat-form-field",4)(8,"mat-label"),e.EFF(9,"Email"),e.k0s(),e.nrm(10,"input",7),e.j41(11,"mat-icon",6),e.EFF(12,"email"),e.k0s(),e.nVh(13,T,2,0,"mat-error"),e.k0s(),e.j41(14,"mat-form-field",4)(15,"mat-label"),e.EFF(16,"Password"),e.k0s(),e.nrm(17,"input",8),e.j41(18,"button",9),e.bIt("click",function(){l.eBV(t);const r=e.XpG();return l.Njj(r.hidePassword=!r.hidePassword)}),e.j41(19,"mat-icon"),e.EFF(20),e.k0s()(),e.nVh(21,$,2,0,"mat-error"),e.k0s(),e.j41(22,"button",11)(23,"mat-icon",12),e.EFF(24,"login"),e.k0s(),e.EFF(25," Login "),e.k0s(),e.j41(26,"button",13),e.bIt("click",function(){l.eBV(t);const r=e.XpG();return l.Njj(r.signUp=!0)}),e.j41(27,"mat-icon",12),e.EFF(28,"how_to_reg"),e.k0s(),e.EFF(29," Register "),e.k0s()()()()}if(2&i){let t,o;const r=e.XpG();e.R7$(3),e.Y8G("src",e.mNQ(r.images.mainLogo),e.B4B),e.R7$(3),e.Y8G("formGroup",r.loginForm),e.R7$(7),e.vxM(null!=(t=r.loginForm.get("email"))&&t.touched&&null!=(t=r.loginForm.get("email"))&&t.invalid?13:-1),e.R7$(4),e.Y8G("type",r.hidePassword?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password"),e.R7$(2),e.JRh(r.hidePassword?"visibility_off":"visibility"),e.R7$(),e.vxM(null!=(o=r.loginForm.get("password"))&&o.touched&&null!=(o=r.loginForm.get("password"))&&o.invalid?21:-1),e.R7$(),e.Y8G("disabled",r.loginForm.invalid)}}let N=(()=>{class i{fb;authServices;commonServices;toaster;registerForm;loginForm;signUp=!1;hidePassword=!0;router=(0,l.WQX)(b.Ix);images=w._;constructor(t,o,r,c){this.fb=t,this.authServices=o,this.commonServices=r,this.toaster=c,this.registerForm=this.fb.group({name:["",[s.k0.required,s.k0.minLength(3)]],email:["",[s.k0.required,s.k0.email]],password:["",[s.k0.required,s.k0.minLength(4)]],confirmPassword:["",[s.k0.required,s.k0.minLength(4)]]},{validators:j.R}),this.loginForm=this.fb.group({email:["",[s.k0.required,s.k0.email]],password:["",[s.k0.required,s.k0.minLength(4)]]})}ngOnInit(){localStorage.getItem("token")&&this.router.navigateByUrl("/home")}onSubmit(){var t=this;return(0,h.A)(function*(){try{if(t.signUp){if(t.registerForm.valid){const o=yield F(t.authServices.newUserRegistration(t.registerForm.value));t.toaster.show(o.name+" Registered!","success",5e3),t.signUp=!1}else t.registerForm.markAllAsTouched();t.commonServices.loggedInValue=!1}else if(t.loginForm.valid){const o=yield F(t.authServices.userLogin(t.loginForm.value));o.token&&(localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),t.router.navigateByUrl("/home"),t.toaster.show("Login SuccessFul","success"),t.commonServices.getAllCategoriesForCustomer(),t.commonServices.getAllOrdersOfUSer(),t.commonServices.loggedInValue=!0,t.commonServices.userName=o.user?.name||"")}else t.loginForm.markAllAsTouched(),t.commonServices.loggedInValue=!1,t.commonServices.userName=""}catch(o){t.toaster.show(o.error.message,"error",5e3),404===o.status&&(t.signUp=!0,t.toaster.show("Please Register First","info",5e3),t.loginForm.reset(),t.registerForm.reset()),t.commonServices.loggedInValue=!1}})()}static \u0275fac=function(o){return new(o||i)(e.rXU(s.ok),e.rXU(x.p),e.rXU(y.e),e.rXU(E.N))};static \u0275cmp=e.VBU({type:i,selectors:[["app-register"]],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-100"],[1,"bg-white","p-[4rem]","rounded-lg","shadow-md","w-full","max-w-md"],[1,"text-[1.5rem]","font-bold","mb-[1.5rem]","text-center","text-gray-800"],[1,"space-y-[1.5rem]",3,"ngSubmit","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","name","placeholder","Enter your name"],["matSuffix",""],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Enter your password",3,"type"],["mat-raised-button","","color","primary","type","submit",1,"w-full","py-[0.5rem]",3,"disabled"],[1,"mr-[0.5rem]"],["mat-raised-button","","color","primary",1,"w-full","py-[0.5rem]",3,"click"],[1,"bg-white","p-[4rem]","rounded-lg","shadow-md","w-full","items-center","max-w-md"],[1,"flex","flex-col","items-center","mb-[1rem]"],["alt","Logo",1,"mb-[1.5rem]","w-[8rem]","sm:w-[9rem]","md:w-[10rem]","lg:w-[12rem]","h-auto",3,"src"],[1,"text-[1.5rem]","font-bold","mb-[1rem]","text-center","text-gray-800"]],template:function(o,r){1&o&&e.nVh(0,G,43,12,"div",0)(1,I,30,9,"div",0),2&o&&e.vxM(r.signUp?0:1)},dependencies:[s.YN,s.qT,s.me,s.BC,s.cb,s.X1,s.j4,s.JD,v.R,d.rl,d.nJ,d.TL,d.yw,f.fS,f.fg,g.Hl,g.$z,_.iY,p.m_,p.An],encapsulation:2})}return i})()}}]);