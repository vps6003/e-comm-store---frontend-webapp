"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[349],{6349(T,P,a){a.d(P,{ProductListPage:()=>O});var p=a(1400),l=a(2615),h=a(3283),c=a(3694),E=a(8132),L=a(5671),d=a(2006),f=a(1228),C=a(7411),_=a(9417),u=a(8834),e=a(3664),M=a(407),g=a(7982);function v(s,n){if(1&s&&(e.j41(0,"mat-option",7),e.EFF(1),e.k0s()),2&s){const r=n.$implicit;e.Y8G("value",r._id),e.R7$(),e.SpI("",r.name," ")}}function I(s,n){if(1&s&&(e.j41(0,"mat-option",7),e.EFF(1),e.k0s()),2&s){const r=n.$implicit;e.Y8G("value",r._id),e.R7$(),e.SpI("",r.brandName," ")}}function y(s,n){1&s&&e.nrm(0,"app-product-card",13),2&s&&e.Y8G("product",n.$implicit)}function D(s,n){1&s&&(e.j41(0,"div",14),e.EFF(1,"No Products available for current filter"),e.k0s())}let O=(()=>{class s{customerServices=(0,l.WQX)(h.f);commonServices=(0,l.WQX)(C.e);commonVariablesService=(0,l.WQX)(p.y);router=(0,l.WQX)(c.Ix);route=(0,l.WQX)(c.nX);queryReqParams;reqParams={searchTerm:"",categoryId:"",brandId:"",sortBy:"price",sortOrder:"1",page:1,pageSize:6};productList=[];categoryList=[];brandsList=[];ngOnInit(){this.route.snapshot.queryParams?.searchTerm||this.route.snapshot.queryParams.categoryId||this.route.snapshot.queryParams.brandId?this.queryReqParams=this.route.queryParams.subscribe(r=>{this.reqParams={...this.reqParams,...r},this.commonVariablesService.searchTerm=this.reqParams.searchTerm,this.getProductLists(this.reqParams),this.getBrands(),this.getCategory()}):this.router.navigateByUrl("/home")}getProductLists(r){setTimeout(()=>{this.customerServices.getProductsList(r).subscribe(m=>{this.productList=m})},100)}getCategory(){this.customerServices.getCategories().subscribe(r=>{this.categoryList=r})}getBrands(){this.customerServices.getBrands().subscribe(r=>{this.brandsList=r})}pageChange(r){this.reqParams.page=r,this.getProductLists(this.reqParams)}ngOnDestroy(){this.queryReqParams&&this.queryReqParams.unsubscribe()}static \u0275fac=function(m){return new(m||s)};static \u0275cmp=e.VBU({type:s,selectors:[["app-product-list-page"]],decls:45,vars:8,consts:[[1,"flex","px-10","py-[1rem]"],[1,"w-3/12","mr-[2rem]"],[1,"text-[1.5rem]","pl-[1rem]"],[1,"flex","flex-col","mt-[1rem]"],[1,"w-full","p-2","mb-4"],[1,"w-full"],["name","categoryId",3,"ngModelChange","selectionChange","ngModel"],[3,"value"],["name","brandId",3,"ngModelChange","selectionChange","ngModel"],[1,"flex-1","ml-[1rem]"],[1,"text-[1.5rem]"],["name","sortBy",3,"ngModelChange","selectionChange","ngModel"],[1,"flex","flex-wrap","gap-4"],[3,"product"],[1,"mt-[2rem]"],[1,"flex","mt-[2rem]","ml-[-10rem]","justify-center","items-center","gap-4"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(m,t){1&m&&(e.j41(0,"div",0)(1,"div",1)(2,"h4")(3,"strong",2),e.EFF(4,"Filters"),e.k0s()(),e.j41(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),e.EFF(9,"Choose Category"),e.k0s(),e.j41(10,"mat-select",6),e.mxI("ngModelChange",function(o){return e.DH7(t.reqParams.categoryId,o)||(t.reqParams.categoryId=o),o}),e.bIt("selectionChange",function(){return t.getProductLists(t.reqParams)}),e.j41(11,"mat-option",7),e.EFF(12,"None"),e.k0s(),e.Z7z(13,v,2,2,"mat-option",7,e.Vm6),e.k0s()()(),e.j41(15,"div")(16,"mat-form-field",5)(17,"mat-label"),e.EFF(18,"Choose Brand"),e.k0s(),e.j41(19,"mat-select",8),e.mxI("ngModelChange",function(o){return e.DH7(t.reqParams.brandId,o)||(t.reqParams.brandId=o),o}),e.bIt("selectionChange",function(){return t.getProductLists(t.reqParams)}),e.j41(20,"mat-option",7),e.EFF(21,"None"),e.k0s(),e.Z7z(22,I,2,2,"mat-option",7,e.Vm6),e.k0s()()()()(),e.j41(24,"div",9)(25,"h6")(26,"strong",10),e.EFF(27,"Products"),e.k0s()(),e.j41(28,"mat-form-field")(29,"mat-label"),e.EFF(30,"Sort By"),e.k0s(),e.j41(31,"mat-select",11),e.mxI("ngModelChange",function(o){return e.DH7(t.reqParams.sortOrder,o)||(t.reqParams.sortOrder=o),o}),e.bIt("selectionChange",function(){return t.getProductLists(t.reqParams)}),e.j41(32,"mat-option",7),e.EFF(33," Price Low To High"),e.k0s(),e.j41(34,"mat-option",7),e.EFF(35,"Price High To Low"),e.k0s()()(),e.j41(36,"div",12),e.Z7z(37,y,1,1,"app-product-card",13,e.Vm6,!1,D,2,0,"div",14),e.k0s(),e.j41(40,"div",15)(41,"button",16),e.bIt("click",function(){return t.pageChange(t.reqParams.page-1)}),e.EFF(42," Previous "),e.k0s(),e.j41(43,"button",16),e.bIt("click",function(){return t.pageChange(t.reqParams.page+1)}),e.EFF(44," Next "),e.k0s()()()()),2&m&&(e.R7$(10),e.R50("ngModel",t.reqParams.categoryId),e.R7$(3),e.Dyx(t.categoryList),e.R7$(6),e.R50("ngModel",t.reqParams.brandId),e.R7$(3),e.Dyx(t.brandsList),e.R7$(9),e.R50("ngModel",t.reqParams.sortOrder),e.R7$(),e.Y8G("value",1),e.R7$(2),e.Y8G("value",-1),e.R7$(3),e.Dyx(t.productList),e.R7$(4),e.Y8G("disabled",1===t.reqParams.page),e.R7$(2),e.Y8G("disabled",t.reqParams.pageSize>t.productList.length))},dependencies:[E.iI,L.A,d.Ve,g.rl,g.nJ,d.VO,M.wT,f.R,_.YN,_.BC,_.vS,u.Hl,u.$z],encapsulation:2})}return s})()}}]);