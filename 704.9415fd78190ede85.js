"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[704],{2704:($,d,s)=>{s.r(d),s.d(d,{Register:()=>I});var h=s(467),a=s(2615),n=s(9417),g=s(8834),v=s(1228),f=s(2155),p=s(2629),b=s(3243),k=s(9350),R=s(7707);function F(i,m){const t="object"==typeof m;return new Promise((o,r)=>{const c=new R.Ms({next:l=>{o(l),c.unsubscribe()},error:r,complete:()=>{t?o(m.defaultValue):r(new k.G)}});i.subscribe(c)})}var e=s(3664),j=s(1816),_=s(7411),w=s(8983),u=s(7982),y=s(4297);function x(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Name is required (min 3 characters)."),e.k0s())}function E(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter a valid email."),e.k0s())}function C(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Password must be at least 6 characters."),e.k0s())}function S(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Password must be at least 6 characters."),e.k0s())}function P(i,m){if(1&i){const t=e.RV6();e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Register"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){a.eBV(t);const r=e.XpG();return a.Njj(r.onSubmit())}),e.j41(5,"mat-form-field",4)(6,"mat-label"),e.EFF(7,"Name"),e.k0s(),e.nrm(8,"input",5),e.j41(9,"mat-icon",6),e.EFF(10,"person"),e.k0s(),e.nVh(11,x,2,0,"mat-error"),e.k0s(),e.j41(12,"mat-form-field",4)(13,"mat-label"),e.EFF(14,"Email"),e.k0s(),e.nrm(15,"input",7),e.j41(16,"mat-icon",6),e.EFF(17,"email"),e.k0s(),e.nVh(18,E,2,0,"mat-error"),e.k0s(),e.j41(19,"mat-form-field",4)(20,"mat-label"),e.EFF(21,"Password"),e.k0s(),e.nrm(22,"input",8),e.j41(23,"button",9),e.bIt("click",function(){a.eBV(t);const r=e.XpG();return a.Njj(r.hidePassword=!r.hidePassword)}),e.j41(24,"mat-icon"),e.EFF(25),e.k0s()(),e.nVh(26,C,2,0,"mat-error"),e.k0s(),e.j41(27,"mat-form-field",4)(28,"mat-label"),e.EFF(29,"Confirm Password"),e.k0s(),e.nrm(30,"input",10),e.j41(31,"button",9),e.bIt("click",function(){a.eBV(t);const r=e.XpG();return a.Njj(r.hidePassword=!r.hidePassword)}),e.j41(32,"mat-icon"),e.EFF(33),e.k0s()(),e.nVh(34,S,2,0,"mat-error"),e.k0s(),e.j41(35,"button",11)(36,"mat-icon",12),e.EFF(37,"person_add"),e.k0s(),e.EFF(38," Register "),e.k0s(),e.j41(39,"button",13),e.bIt("click",function(){a.eBV(t);const r=e.XpG();return a.Njj(r.signUp=!1)}),e.j41(40,"mat-icon",12),e.EFF(41,"login"),e.k0s(),e.EFF(42," Login "),e.k0s()()()()}if(2&i){let t,o,r,c;const l=e.XpG();e.R7$(4),e.Y8G("formGroup",l.registerForm),e.R7$(7),e.vxM(null!=(t=l.registerForm.get("name"))&&t.touched&&null!=(t=l.registerForm.get("name"))&&t.invalid?11:-1),e.R7$(7),e.vxM(null!=(o=l.registerForm.get("email"))&&o.touched&&null!=(o=l.registerForm.get("email"))&&o.invalid?18:-1),e.R7$(4),e.Y8G("type",l.hidePassword?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password"),e.R7$(2),e.JRh(l.hidePassword?"visibility_off":"visibility"),e.R7$(),e.vxM(null!=(r=l.registerForm.get("password"))&&r.touched&&null!=(r=l.registerForm.get("password"))&&r.invalid?26:-1),e.R7$(4),e.Y8G("type",l.hidePassword?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password"),e.R7$(2),e.JRh(l.hidePassword?"visibility_off":"visibility"),e.R7$(),e.vxM(null!=(c=l.registerForm.get("confirmPassword"))&&c.touched&&null!=(c=l.registerForm.get("confirmPassword"))&&c.invalid?34:-1),e.R7$(),e.Y8G("disabled",l.registerForm.invalid)}}function V(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Please enter a valid email."),e.k0s())}function G(i,m){1&i&&(e.j41(0,"mat-error"),e.EFF(1,"Password must be at least 6 characters."),e.k0s())}function T(i,m){if(1&i){const t=e.RV6();e.j41(0,"div",0)(1,"div",1)(2,"h2",2),e.EFF(3,"Login"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){a.eBV(t);const r=e.XpG();return a.Njj(r.onSubmit())}),e.j41(5,"mat-form-field",4)(6,"mat-label"),e.EFF(7,"Email"),e.k0s(),e.nrm(8,"input",7),e.j41(9,"mat-icon",6),e.EFF(10,"email"),e.k0s(),e.nVh(11,V,2,0,"mat-error"),e.k0s(),e.j41(12,"mat-form-field",4)(13,"mat-label"),e.EFF(14,"Password"),e.k0s(),e.nrm(15,"input",8),e.j41(16,"button",9),e.bIt("click",function(){a.eBV(t);const r=e.XpG();return a.Njj(r.hidePassword=!r.hidePassword)}),e.j41(17,"mat-icon"),e.EFF(18),e.k0s()(),e.nVh(19,G,2,0,"mat-error"),e.k0s(),e.j41(20,"button",11)(21,"mat-icon",12),e.EFF(22,"login"),e.k0s(),e.EFF(23," Login "),e.k0s(),e.j41(24,"button",13),e.bIt("click",function(){a.eBV(t);const r=e.XpG();return a.Njj(r.signUp=!0)}),e.j41(25,"mat-icon",12),e.EFF(26,"how_to_reg"),e.k0s(),e.EFF(27," Register "),e.k0s()()()()}if(2&i){let t,o;const r=e.XpG();e.R7$(4),e.Y8G("formGroup",r.loginForm),e.R7$(7),e.vxM(null!=(t=r.loginForm.get("email"))&&t.touched&&null!=(t=r.loginForm.get("email"))&&t.invalid?11:-1),e.R7$(4),e.Y8G("type",r.hidePassword?"password":"text"),e.R7$(),e.BMQ("aria-label","Hide password"),e.R7$(2),e.JRh(r.hidePassword?"visibility_off":"visibility"),e.R7$(),e.vxM(null!=(o=r.loginForm.get("password"))&&o.touched&&null!=(o=r.loginForm.get("password"))&&o.invalid?19:-1),e.R7$(),e.Y8G("disabled",r.loginForm.invalid)}}let I=(()=>{class i{fb;authServices;commonServices;toaster;registerForm;loginForm;signUp=!1;hidePassword=!0;router=(0,a.WQX)(b.Ix);constructor(t,o,r,c){this.fb=t,this.authServices=o,this.commonServices=r,this.toaster=c,this.registerForm=this.fb.group({name:["",[n.k0.required,n.k0.minLength(3)]],email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(4)]],confirmPassword:["",[n.k0.required,n.k0.minLength(4)]]}),this.loginForm=this.fb.group({email:["",[n.k0.required,n.k0.email]],password:["",[n.k0.required,n.k0.minLength(4)]]})}ngOnInit(){localStorage.getItem("token")&&this.router.navigateByUrl("/home")}onSubmit(){var t=this;return(0,h.A)(function*(){try{if(t.signUp){if(t.registerForm.valid){const o=yield F(t.authServices.newUserRegistration(t.registerForm.value));t.toaster.show(o.name+" Registered!","success",5e3),t.signUp=!1}else t.registerForm.markAllAsTouched();t.commonServices.loggedInValue=!1}else if(t.loginForm.valid){const o=yield F(t.authServices.userLogin(t.loginForm.value));o.token&&(localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),t.router.navigateByUrl("/home"),t.toaster.show("Login SuccessFul","success"),t.commonServices.getAllCategoriesForCustomer(),t.commonServices.getAllOrdersOfUSer(),t.commonServices.loggedInValue=!0)}else t.loginForm.markAllAsTouched(),t.commonServices.loggedInValue=!1}catch(o){t.toaster.show(o.error,"error",5e3),t.commonServices.loggedInValue=!1}})()}static \u0275fac=function(o){return new(o||i)(e.rXU(n.ok),e.rXU(j.p),e.rXU(_.e),e.rXU(w.N))};static \u0275cmp=e.VBU({type:i,selectors:[["app-register"]],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-100"],[1,"bg-white","p-8","rounded-lg","shadow-md","w-full","max-w-md"],[1,"text-2xl","font-bold","mb-6","text-center","text-gray-800"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"w-full"],["matInput","","type","text","formControlName","name","placeholder","Enter your name"],["matSuffix",""],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Enter your password",3,"type"],["mat-raised-button","","color","primary","type","submit",1,"w-full","py-2",3,"disabled"],[1,"mr-2"],["mat-raised-button","","color","primary",1,"w-full","py-2",3,"click"]],template:function(o,r){1&o&&e.nVh(0,P,43,12,"div",0)(1,T,28,7,"div",0),2&o&&e.vxM(r.signUp?0:1)},dependencies:[n.YN,n.qT,n.me,n.BC,n.cb,n.X1,n.j4,n.JD,v.R,u.rl,u.nJ,u.TL,u.yw,f.fS,f.fg,g.Hl,g.$z,y.iY,p.m_,p.An],encapsulation:2})}return i})()}}]);