<header class="shadow relative">

  <!-- Mobile Top Bar: Hamburger + Logo + Actions -->
  <div class="flex items-center justify-between bg-cyan-300 px-[1rem] py-[0.5rem] sm:hidden gap-[1rem]">

    <!-- Hamburger Menu -->
    <button
      class="flex items-center justify-center p-[0.5rem] border border-gray-900 rounded hover:bg-gray-900 hover:text-white z-50"
      (click)="toggleMobileMenu()"
    >
      <mat-icon>menu</mat-icon>
    </button>

    <!-- Logo -->
    <a routerLink="/home" class="flex items-center gap-[0.5rem] flex-shrink-0">
      <img src="{{images.mainLogo}}" alt="Logo" class="h-[4rem] w-[4rem]" />
    </a>

    <!-- Actions: Wishlist, Cart, Logout -->
    <div class="flex items-center gap-[0.5rem] flex-shrink-0" [ngClass]="{ 'invisible': !commonVariablesService.loggedIn$.value }">
      <!-- @if(commonVariablesService.loggedIn$.value){ -->

      <a routerLink="/customer/wishlist" class="text-gray-900 hover:text-red-500 text-[1rem] flex items-center">
        <mat-icon tooltip="Wishlist" class="!text-red-400">favorite</mat-icon>
      </a>
      <a routerLink="/customer/cart" class="text-gray-900 hover:text-yellow-500 text-[1rem] flex items-center relative">
        <mat-icon tooltip="Cart" matBadge="{{commonVariablesService.cartData?.productQuantity?.length}}" class="!text-yellow-500">
          shopping_cart
        </mat-icon>
      </a>

      <button
        (click)="logout()"
        class="px-[0.75rem] py-[0.25rem] border border-gray-900 rounded hover:bg-gray-900 hover:text-white transition-colors text-[1rem]"
      >
        Logout
      </button>
    <!-- } -->
    </div>

  </div>

  <!-- Mobile Search Bar -->
  <div class="sm:hidden px-[1rem] py-[0.5rem]">
    <div class="relative w-full">
      <input
        #searchBar
        type="text"
        placeholder="Search for products..."
        [(ngModel)]="commonVariablesService.searchTerm"
        (keyup.enter)="onSearch(searchBar.value)"
        class="w-full px-[1rem] pr-[2.5rem] py-[0.5rem] border-2 border-blue-600 rounded-md focus:outline-none focus:border-blue-800 text-[1rem] bg-white"
      />
      <span
        class="material-icons absolute right-[0.75rem] top-1/2 -translate-y-1/2 cursor-pointer text-gray-600 hover:text-red-500"
        (click)="onSearch(searchBar.value)"
      >
        search
      </span>
    </div>
  </div>

  <!-- Tablet & Desktop Top Bar: Logo + Search + Actions -->
  <div class="hidden sm:flex items-center justify-between bg-cyan-300 px-[2rem] py-[0.5rem] gap-[1rem]">

    <!-- Logo -->
    <a routerLink="/home" class="flex items-center gap-[0.5rem] flex-shrink-0">
      <img src="{{images.mainLogo}}" alt="Logo" class="h-[4rem] w-[4rem]" />
    </a>

    <!-- Search Bar -->
    <div class="flex-1 max-w-[40%] md:max-w-[30%] lg:max-w-[25%] mx-[1rem]">
      <div class="relative w-full">
        <input
          #searchBar
          type="text"
          placeholder="Search for products..."
          [(ngModel)]="commonVariablesService.searchTerm"
          (keyup.enter)="onSearch(searchBar.value)"
          class="w-full px-[1rem] pr-[2.5rem] py-[0.5rem] border-2 border-blue-600 rounded-md focus:outline-none focus:border-blue-800 text-[1rem] bg-white"
        />
        <span
          class="material-icons absolute right-[0.75rem] top-1/2 -translate-y-1/2 cursor-pointer text-gray-600 hover:text-red-500"
          (click)="onSearch(searchBar.value)"
        >
          search
        </span>
      </div>
    </div>

   <!-- Actions: Wishlist, Cart, Logout, Admin -->
<div class="flex items-center gap-[0.5rem] flex-shrink-0" [ngClass]="{ 'invisible': !commonVariablesService.loggedIn$.value }">
     <!-- @if(commonVariablesService.loggedIn$.value){ -->
  <a routerLink="/customer/wishlist" class="text-gray-900 hover:text-red-500 text-[1rem] flex items-center">
    <mat-icon tooltip="Wishlist" class="!text-red-400">favorite</mat-icon>
  </a>

  <!-- Cart with extra spacing to logout -->
  <a routerLink="/customer/cart" class="text-gray-900 hover:text-yellow-500 text-[1rem] flex items-center relative mr-[1.5rem]">
    <mat-icon tooltip="Cart" matBadge="{{commonVariablesService.cartData?.productQuantity?.length}}" class="!text-yellow-500">
      shopping_cart
    </mat-icon>
  </a>

  @if(isAdmin){
  <a routerLink="/admin" class="text-gray-900 font-semibold hover:underline text-[1rem]">Dashboard</a>
  }


       <button
    (click)="logout()"
    class="px-[0.75rem] py-[0.25rem] border border-gray-900 rounded hover:bg-gray-900 hover:text-white transition-colors text-[1rem]"
  >
    Logout
  </button>


<!-- } -->
</div>


  </div>

  <!-- Category Menu (Scrollable) -->
  <nav class="bg-[#43c6ac] py-[0.5rem] overflow-x-auto scrollbar-hide">
    <ul class="flex gap-[1rem] text-[1rem] flex-nowrap whitespace-nowrap px-[2rem]">
      @for(category of commonVariablesService.allCategories; track category._id){
        <li>
          <a
            [routerLink]="['/products']"
            [queryParams]="{ categoryId: category._id }"
            class="text-white font-medium hover:underline hover:text-blue-800 whitespace-nowrap"
          >
            {{ category.name }}
          </a>
        </li>
      }
      <li class="mr-[2rem]"></li>
    </ul>
  </nav>

</header>
